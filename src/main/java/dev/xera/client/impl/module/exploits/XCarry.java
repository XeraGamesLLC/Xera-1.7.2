package dev.xera.client.impl.module.exploits;

import me.bush.eventbus.annotation.EventListener;
import net.minecraft.client.gui.inventory.GuiInventory;
import net.minecraft.network.play.client.C0DPacketCloseWindow;
import dev.xera.client.impl.event.impl.client.EventTick;
import dev.xera.client.impl.event.impl.network.EventPacket;
import dev.xera.client.impl.module.ModuleCategory;
import dev.xera.client.impl.module.ToggleableModule;

public class XCarry extends ToggleableModule {
    private int windowId = -1;

    public XCarry() {
        super("XCarry", new String[]{"craftcarry", "craftingcarry"}, ModuleCategory.EXPLOITS);
    }

    @EventListener
    public void onTick(EventTick event) {
        if (mc.currentScreen instanceof GuiInventory) {
            windowId = mc.thePlayer.openContainer.windowId;
        }
    }

    @EventListener
    public void onPacket(EventPacket event) {
        if (event.getPacket() instanceof C0DPacketCloseWindow) {
            C0DPacketCloseWindow packet = event.getPacket();
            if (packet.windowId == windowId) {
                event.setCancelled(true);
            }
        }
    }
}
