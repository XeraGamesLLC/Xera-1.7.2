package dev.xera.client.impl.module.exploits;

import me.bush.eventbus.annotation.EventListener;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.potion.Potion;
import dev.xera.client.api.property.Property;
import dev.xera.client.impl.event.impl.client.EventTick;
import dev.xera.client.impl.module.ModuleCategory;
import dev.xera.client.impl.module.ToggleableModule;

public class Regen extends ToggleableModule {
    private final Property<Float> health = new Property<>(10.0f, 1.0f, 20.0f, "Health", "hp");
    private final Property<Integer> packets = new Property<>(20, 1, 250, "Packets", "pks");

    public Regen() {
        super("Regen", new String[]{"autoregen", "healthregen", "fastregen"}, ModuleCategory.EXPLOITS);
        offerProperties(health, packets);
    }

    @EventListener
    public void onTick(EventTick event) {
        if (mc.thePlayer.isPotionActive(Potion.regeneration) && mc.thePlayer.getHealth() <= health.getValue()) {

            for (int i = 0; i < packets.getValue(); ++i) {
                mc.thePlayer.sendQueue.addToSendQueueSilent(new C03PacketPlayer());
            }
        }
    }
}
